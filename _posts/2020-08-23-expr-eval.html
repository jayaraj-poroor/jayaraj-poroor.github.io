---
layout: default
title:  "DIY Parser/Evaluator (Python)."
date:   2019-12-14 09:00:00 +0200
published: 2019-12-14 09:00:00 +0200
comments: true
noimage: true
categories: data-frames
tags: [parsing, lazy sequence, generator, recursive descent, memoization, python]
github: "https://github.com/jayarajporoor/pylib/tree/master/diy_parser_eval"
---

<p>


Simplified parser/evaluator of expression strings without explicit AST generation. Python implementation. Covers concepts: 

<ul>
	<li>Generators/lazy sequences.</li>
	<li> Top-down (recursive descent) parsing.</li>
	<li>Efficient combined parse/evaluate in a single pass without explicit AST generation.</li>
	<li>Variable evaluation.</li>
	<li>Memoization.</li>
</ul>
</p>
<!--more-->
<div class='heading'>Materials</div>
<ul>
	<li>
<a target='_new' href="https://github.com/jayarajporoor/pylib/tree/master/diy_parser_eval">Github code.</a></li>
 <li><a target='_new' href ="https://youtu.be/gjt6BOZ44gk">Tutorial video.</a></li></li>
 </ul>


<div>
<div class='heading'>Right associativity</div>
 Top-down parsing tends to introduce right-associativity for the operators, i.e., if an operator with same precedence appears on left and right sides of an operand, the operand will associate with the operator on the right side. So <code>1 - 3 - 2</code> would be parsed as <code>1 - (3 - 2)</code>, evaluating to 0 rather than the customary -4.  Therefore, we need to provide parenthesis to make the associativity explicit. The solution is to a standard rewrite of the grammar as follows:
</div>
<pre><code>E ::=  T X
X ::=  '+' T X  |  '-' T X  |  epsilon
T  ::= F Y
Y  ::= '*' F Y  |  '/' F Y | epsilon
F  ::=  number  |  variable  |   '('  E  ')'</code></pre>
<div>
Using the given code as a reference, you could try implementing a top-down parser using this grammar and see the difference in outcomes. (Thanks to <a href="https://cse.buffalo.edu/faculty/bharat/" target="_new">Prof. Bharat Jayaraman</a> for pointing out right associativity and providing the grammar rewrite). 
</div>

<div class='heading'>Watch Now</div>

<iframe width="560" height="315" src="https://www.youtube.com/embed/gjt6BOZ44gk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
